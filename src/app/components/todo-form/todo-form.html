<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <div class="form-control">
            <label for="title">Title</label>
            <input type="text" id="title" placeholder="Todo Title" formControlName="title">
            @if (isInvalid('title')) {
                @if (form.get('title')?.errors?.['required']) {
                    <span class="task-error">Title is required!</span>
                }
            }
        </div>
        <div class="form-control">
            <label for="description">Description</label>
            <textarea rows="5" cols="20" id="description" placeholder="Todo Description"
                formControlName="description"></textarea>
        </div>

    </div>

    <div class="form-group">
        <div class="form-control">
            <label for="start">Start Date</label>
            <input type="date" id="start" placeholder="Start Date" formControlName="startDate" [min]="todayMinDate()">
            @if (isInvalid('startDate')) {
                @if (form.get('startDate')?.errors?.['required']) {
                    <span class="task-error">Start Date is required!</span>
                }
            }
        </div>
        <div class="form-control">
            <label for="end">End Date</label>
            <input type="date" id="end" placeholder="End Date" formControlName="endDate" [min]="todayMinDate()">
            @if (isInvalid('endDate')) {
                @if (form.get('endDate')?.errors?.['required']) {
                    <span class="task-error">End Date is required!</span>
                }
            }
        </div>
    </div>
    <div class="form-group">

        <div class="form-control">
            <label for="status">Status</label>
            <select name="status" id="status" formControlName="status">
                <option value="open">Open</option>
                <option value="complete">Complete</option>
            </select>
            @if (isInvalid('status')) {
                @if (form.get('status')?.errors?.['required']) {
                    <span class="task-error">Status is required!</span>
                }
            }
        </div>
        <div class="form-control">
            <label for="task">Task</label>
            <input #taskInput type="text" id="task" placeholder="Todo Task" (input)="onInput($event)"
                [value]="newTask()">
            @if (taskError()) {
            <span class="task-error">{{ taskError() }}</span>
            }
        </div>
        <app-button class="add-task" [label]="'Add'" [color]="'default'" (clicked)="addTask()" />
    </div>

    <ul class="todo-tasks">
        @for (task of tasks(); track task) {
        <li> {{ task }} <span (click)="removeTask(task)">X</span></li>
        }

    </ul>

    <div class="form-actions">
        <app-button [type]="'button'" [label]="'Cancel'" [color]="'cancel'" (clicked)="onCancel()" />
        <app-button class="action-btn-ml" [type]="'submit'" [label]="submitLabel()" [color]="'default'" />
    </div>
</form>